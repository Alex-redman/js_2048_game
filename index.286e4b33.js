!function(){var e={};function t(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var r=function(){var e;function r(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),this.board=e||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}return e=[{key:"renderBoard",value:function(){var e=document.querySelectorAll(".field-cell"),t=this.board.flat();e.forEach(function(e,r){var s=t[r];e.textContent=0===s?"":s,s>0?e.classList.add("field-cell--".concat(s)):e.classList="field-cell"})}},{key:"canMove",value:function(){for(var e=0;e<this.board.length;e++)for(var t=0;t<this.board[e].length;t++)if(0===this.board[e][t]||t>0&&this.board[e][t]===this.board[e][t-1]||t<this.board[e].length-1&&this.board[e][t]===this.board[e][t+1]||e>0&&this.board[e][t]===this.board[e-1][t]||e<this.board.length-1&&this.board[e][t]===this.board[e+1][t])return!0;return this.lose(),!1}},{key:"moveLeft",value:function(){var e=this;if(this.canMove()){for(var r=this.board.map(function(e){return e.slice()}),s=0;s<this.board.length;s++){var a=function(t){for(var r=e.board[t].filter(function(e){return 0!==e}),s=0;s<r.length-1;s++)r[s]===r[s+1]&&(r[s]*=2,e.score+=r[s],r[s+1]=0);for(var a=r.filter(function(e){return 0!==e});a.length<4;)a.push(0);if(e.board[t]=a,a.includes(2048))return e.status="win",e.displayWinMessage(),{v:void 0}}(s);if("object"===t(a))return a.v}this.boardsAreEqual(r,this.board)||this.addRandomTile(),this.updateScore(),this.renderBoard()}}},{key:"moveRight",value:function(){var e=this;if(this.canMove()){for(var r=this.board.map(function(e){return e.slice()}),s=0;s<this.board.length;s++){var a=function(t){for(var r=e.board[t].filter(function(e){return 0!==e}).reverse(),s=0;s<r.length-1;s++)r[s]===r[s+1]&&(r[s]*=2,e.score+=r[s],r[s+1]=0);for(var a=r.filter(function(e){return 0!==e});a.length<4;)a.push(0);if(e.board[t]=a.reverse(),a.includes(2048))return e.status="win",e.displayWinMessage(),{v:void 0}}(s);if("object"===t(a))return a.v}this.boardsAreEqual(r,this.board)||this.addRandomTile(),this.updateScore(),this.renderBoard()}}},{key:"moveUp",value:function(){var e=this;if(this.canMove()){for(var r=this.board.map(function(e){return e.slice()}),s=0;s<this.board[0].length;s++){var a=function(t){for(var r=[],s=0;s<e.board.length;s++)r.push(e.board[s][t]);for(var a=r.filter(function(e){return 0!==e}),o=0;o<a.length-1;o++)a[o]===a[o+1]&&(a[o]*=2,e.score+=a[o],a[o+1]=0);for(var n=a.filter(function(e){return 0!==e});n.length<4;)n.push(0);for(var i=0;i<e.board.length;i++)e.board[i][t]=n[i];if(n.includes(2048))return e.status="win",e.displayWinMessage(),{v:void 0}}(s);if("object"===t(a))return a.v}this.boardsAreEqual(r,this.board)||this.addRandomTile(),this.updateScore(),this.renderBoard()}}},{key:"moveDown",value:function(){var e=this;if(this.canMove()){for(var r=this.board.map(function(e){return e.slice()}),s=0;s<this.board[0].length;s++){var a=function(t){for(var r=[],s=0;s<e.board.length;s++)r.push(e.board[s][t]);r.reverse();for(var a=r.filter(function(e){return 0!==e}),o=0;o<a.length-1;o++)a[o]===a[o+1]&&(a[o]*=2,e.score+=a[o],a[o+1]=0);for(var n=a.filter(function(e){return 0!==e});n.length<4;)n.push(0);n.reverse();for(var i=0;i<e.board.length;i++)e.board[i][t]=n[i];if(n.includes(2048))return e.status="win",e.displayWinMessage(),{v:void 0}}(s);if("object"===t(a))return a.v}this.boardsAreEqual(r,this.board)||this.addRandomTile(),this.updateScore(),this.renderBoard()}}},{key:"boardsAreEqual",value:function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)for(var s=0;s<e[r].length;s++)if(e[r][s]!==t[r][s])return!1;return!0}},{key:"getScore",value:function(){return this.score}},{key:"updateScore",value:function(){document.querySelector(".game-score").textContent=this.score}},{key:"getState",value:function(){return{board:this.board,score:this.score,status:this.status}}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.status="playing",this.addRandomTile(),this.addRandomTile(),this.updateScore(),this.renderBoard()}},{key:"resetBoard",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0}},{key:"addRandomTile",value:function(){for(var e=[],t=0;t<4;t++)for(var r=0;r<4;r++)0===this.board[t][r]&&e.push({row:t,col:r});if(e.length>0){var s=Math.floor(Math.random()*e.length),a=e[s],o=a.row,n=a.col,i=.9>Math.random()?2:4;this.board[o][n]=i,this.score+=i}}},{key:"restart",value:function(){this.status="idle",this.resetBoard(),this.score=0,this.updateScore(),this.renderBoard()}},{key:"lose",value:function(){this.status="lose",document.querySelector(".message-restart").classList.add("hidden"),document.querySelector(".message-start").classList.add("hidden"),document.querySelector(".message-lose").classList.remove("hidden")}},{key:"displayWinMessage",value:function(){var e=document.querySelector(".message-win");document.querySelector(".message-restart").classList.add("hidden"),document.querySelector(".message-start").classList.add("hidden"),e.classList.remove("hidden")}}],function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(r.prototype,e),r}();e=r,window.Game=r;var s=new e;document.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":s.moveLeft();break;case"ArrowRight":s.moveRight();break;case"ArrowUp":s.moveUp();break;case"ArrowDown":s.moveDown()}});var a=document.querySelector(".button.start"),o=document.querySelector(".message-start"),n=document.querySelector(".message-restart"),i=document.querySelector(".message-win"),d=document.querySelector(".message-lose");a.addEventListener("click",function(){a.classList.contains("start")?(a.textContent="Restart",s.start(),a.classList.remove("start"),a.classList.add("restart"),o.classList.add("hidden"),i.classList.add("hidden"),d.classList.add("hidden"),n.classList.remove("hidden")):(a.textContent="Start",s.restart(),a.classList.remove("restart"),a.classList.add("start"),n.classList.add("hidden"),i.classList.add("hidden"),d.classList.add("hidden"),o.classList.remove("hidden"))})}();
//# sourceMappingURL=index.286e4b33.js.map
